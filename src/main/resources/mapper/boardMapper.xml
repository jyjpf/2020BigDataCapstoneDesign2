<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dictation.mapper.BoardMapper">

	<select id="get" parameterType="Map" resultType="BoardVO">

		SELECT
			YEAR,
			TERM,
			LECTURE_NO,
			BOARD_CD,
			NO,
			TITLE,
			CONTENT,
			READ_CNT,
			FILE_NM,
			SAVE_FILE_NM,
			INPUT_ID,
			INPUT_DATE,
			UPDATE_ID,
			UPDATE_DATE
		FROM
			BOARD
		WHERE 1=1
			AND LECTURE_NO = #{lecture_no}
			AND NO = #{no}

	</select>

	<select id="getList" parameterType="Map" resultType="BoardVO">

		SELECT
			YEAR,
			TERM,
			LECTURE_NO,
			BOARD_CD,
			NO,
			TITLE,
			CONTENT,
			READ_CNT,
			FILE_NM,
			SAVE_FILE_NM,
			INPUT_ID,
			INPUT_DATE,
			UPDATE_ID,
			UPDATE_DATE
		FROM
			BOARD
		WHERE 1=1
			AND LECTURE_NO = #{lecture_no}

	</select> 

	<insert id="insert" parameterType="BoardVO">

		INSERT INTO BOARD(
			YEAR,
			TERM,
			LECTURE_NO,
			BOARD_CD,
			NO,
			SEQ_NO,
			TITLE,
			CONTENT,
			READ_CNT,
			FILE_NM,
			SAVE_FILE_NM,
			INPUT_ID,
			INPUT_DATE,
			UPDATE_ID,
			UPDATE_DATE
		) VALUES (
			'2020',
			'01',
			#{lecture_no},
			#{board_cd},
			#{no},
			'',
			#{title},
			#{content},
			#{read_cnt},
			#{file_nm},
			#{save_file_nm},
			#{input_id},
			NOW(),
			#{input_id},
			NOW()
		)

	</insert>
 

	<delete id="delete" parameterType="Map">

		DELETE FROM
			BOARD
		WHERE 1=1
			AND LECTURE_NO = #{lecture_no}
			AND BOARD_CD = #{board_cd}
			AND NO = #{no}
			AND SEQ_NO = #{seq_no}

	</delete>

	<update id="update" parameterType="BoardVO">

		update
			board
		set
			title = #{title},
			content = #{content},
			file_nm = #{file_nm},
			save_file_nm = #{save_file_nm},
			update_id = #{id},
			update_date = now()
		where 1=1
			and lecture_no = #{lecture_no}
			and board_cd = #{board_cd}
			and no = #{no}

	</update>

	<select id="getHashFilename" parameterType="Map" resultType="String">

		SELECT
			SAVE_FILE_NAME
		FROM
			BOARD
		WHERE 1=1
			AND LECTURE_NO = #{lecture_no}
			AND NO = #{no}
			AND FILE_NM = #{filename}


	</select>

</mapper>

